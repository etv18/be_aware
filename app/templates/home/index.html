{% extends 'layout.html' %}

{% block title %}home{% endblock %}

{% block content %}
<style>
    .chart-scroll-2 {
        width: 100%;
        overflow-x: auto;
        overflow-y: hidden;
    }

    /* Force chart to stay wide */
    .chart-box-2 {
        width: 100%;
        min-width: 100%;   /* key: forces horizontal scroll */
        height: 420px;
    }

    .chart-box-2 canvas {
        width: 100% !important;
        height: 100% !important;
    }

    /* Mobile tweaks */
    @media (max-width: 576px) {
        .chart-box-2 {
            min-width: 700px;  /* smaller but still scrollable */
            height: 280px;
        }
    }
</style>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css' ) }}">

<p class="fs-4 fw-bold text-light">Home</p>
<!-- Fancy Dark Mode Card -->
<div class="d-flex justify-content-center my-2">
    <div class="d-flex justify-content-cente w-100" style="max-width: 320px; height: 110px;">
      <div class="border-top border-start border-end border-bottom rounded-3 p-3 w-100">
        <h5 class="mb-3 text-light">Select a year for the report</h5>
    
        <select class="form-select dark-select" id="year-select">
            {% for year in years %}    
                <option value="{{ year }}">{{ year }}</option>
            {% endfor %}
        </select>
      </div>
    </div>
</div>

<div class="row align-items-stretch mt-2">
    
    <!-- MONTHLY -->
    <div class="col-sm d-flex flex-column align-items-center">
        
        <div class="w-100 text-light fw-bold text-center">
            <p class="fs-4 p-2 mb-0">Current Month</p>
        </div>

        <div class="chart-box">
            <canvas id="incomes-and-expenses-monthly"></canvas>
        </div>

    </div>

    <!-- YEARLY -->
    <div class="col-sm d-flex flex-column align-items-center">
        
        <div class="w-100 text-light fw-bold text-center">
            <p class="fs-4 p-2 mb-0">Yearly Cash Flow</p>
        </div>

        <div class="chart-box">
            <canvas id="incomes-and-expenses-yearly"></canvas>
        </div>

    </div>

</div>


<div class="table-responsive border rounded-3 my-2">
    <div 
        class="d-flex justify-content-center align-items-center w-100 text-light fw-bold rounded-top-2" 
        style="background-color: #3cb45cad; height: 42px;"
    >
        <p class="fs-4 p-2 w-100">Yearly Cash Flow (Table)</p>
    </div>
    <table id="cash-flow-table" class="table table-hover table-sm text-start">
        
    </table>
</div>

<div class="container w-100 border rounded-3 mt-2">
    <div class="row text-center my-2">
        <h3 class="text-center">Yearly Total All Modules</h3>

        <div class="chart-scroll-2">
            <div class="chart-box-2">
                <canvas id="yearly-stats-all-models"></canvas>
            </div>
        </div>
    </div>
</div>

<div class="table-responsive border rounded-3 my-2">
    <div 
        class="d-flex justify-content-center align-items-center w-100 text-light fw-bold rounded-top-2" 
        style="background-color: #16dcffad; height: 42px;"
    >
        <p class="fs-4 p-2">Yearly Total All Modules (Table)</p>
    </div>
    <table id="yearly-report-table" class="table table-hover  text-start">
        
    </table>
</div>


<input type="hidden" name="" id="yearly-stats-all-models-endpoint" value="{{ url_for('stats.yearly_all_model_reports' ) }}">
<input type="hidden" name="" id="yearly-cash-flow-endpoint" value="{{ url_for('stats.cash_flow_info' ) }}">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="../../static/scripts/home/stats.js"></script>
{% endblock %}